!function(e){function t(t){for(var o,c,s=t[0],i=t[1],l=t[2],d=0,m=[];d<s.length;d++)c=s[d],r[c]&&m.push(r[c][0]),r[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={0:0},a=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;a.push([0,1]),n()}([function(e,t,n){"use strict";n(1),n(4),n(6);var o=document.querySelector("script").getAttribute("page");if(!o)throw Error("No entry module specified!");switch(o){case"admin":n(9);break;case"admin-login":n(10);break;case"admin-requests":n(11);break;case"user-login":n(12);break;case"user-requests":n(13);break;case"user-new-request":n(14);break;case"view-a-request":n(15);break;default:throw new Error("Unknown entry module: "+o)}},,,,,,function(e,t,n){"use strict";n(7)},,,function(e,t,n){"use strict";var o=document.getElementById("log-out");localStorage.getItem("userToken")&&location.assign("../contents/users.html"),o.onclick=function(){confirm("Logout?")&&localStorage.clear()}},function(e,t,n){"use strict";var o=document.getElementById("admin-name"),r=document.getElementById("adminpwd"),a=document.getElementsByTagName("form")[0];localStorage.getItem("adminToken")&&location.assign("./dashboard.html"),localStorage.getItem("userToken")&&location.assign("../contents/users.html");a.onsubmit=function(e){var t={email:o.value,password:r.value,admin:!0};return e.preventDefault(),function(e,t){return fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(t)}).then(function(e){return e.json()})}("/auth/login",t).then(function(e){return console.log(e),e.error?alert(e.error):e.user.role?(alert(e.message),localStorage.setItem("adminToken",e.token),localStorage.setItem("id",e.id),localStorage.setItem("admin",JSON.stringify(e.user)),location.assign("./dashboard.html")):alert("This user is not an admin")}).catch(function(e){return console.error(e)})}},function(e,t,n){"use strict";var o=document.getElementsByTagName("tbody")[0];localStorage.getItem("userToken")&&location.assign("../contents/users.html");var r=function(e,t){var n=document.createElement(t);return e.append(n),n};!function(e,t){fetch(e,t).then(function(e){e.json().then(function(e){var t=e.requests;console.log(t),t.forEach(function(e){return function(e,t,n,a){var c=r(o,"tr");r(c,"td").innerHTML=e,r(c,"td").innerHTML=t,r(c,"td").innerHTML=n;var s=r(c,"td"),i=r(c,"td"),l=r(s,"button"),u=r(s,"button"),d=r(l,"i");d.className="material-icons",d.innerHTML="arrow_forward";var m=r(u,"i");m.className="material-icons",m.innerHTML="close",r(i,"button").innerHTML="Resolve"}(e.date,e.name,e.type)})})})}("/requests",{method:"GET",headers:{id:localStorage.getItem("id"),"x-access-token":localStorage.getItem("adminToken")},mode:"cors",cache:"default"})},function(e,t,n){"use strict";var o=document.getElementById("user-name"),r=document.getElementById("userpwd"),a=document.getElementsByTagName("form")[0];localStorage.getItem("userToken")&&location.assign("./contents/users"),localStorage.getItem("adminToken")&&location.assign("./admin/dashboard.html");a.onsubmit=function(e){e.preventDefault(),function(e,t){return fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(t)}).then(function(e){return e.json()})}("/auth/login",{email:o.value,password:r.value}).then(function(e){return console.log(e),e.error?alert(e.error):e.user.role?alert("Admin is not allowed!"):(alert(e.message),localStorage.setItem("userToken",e.token),localStorage.setItem("id",e.id),localStorage.setItem("user",JSON.stringify(e.user)),location.assign("./contents/users.html"))}).catch(function(e){return console.error(e)})}},function(e,t,n){"use strict";var o=document.getElementsByTagName("tbody")[0];localStorage.length<1&&(alert("sorry this user needs to login!"),location.assign(location.origin)),localStorage.getItem("adminToken")&&location.assign("../admin/admin-requests.html");var r=function(e,t){var n=document.createElement(t);return e.append(n),n};fetch("/users/requests",{method:"GET",headers:{id:localStorage.getItem("id"),"x-access-token":localStorage.getItem("userToken")},mode:"cors",cache:"default"}).then(function(e){e.json().then(function(e){var t=e.requests;console.log(t),t.forEach(function(e){return function(e,t,n,a){var c=r(o,"tr");r(c,"td").innerHTML=e,r(c,"td").innerHTML=t,r(c,"td").innerHTML=n;var s=r(c,"td"),i=r(s,"a");i.href="modify-request.html",r(i,"button").innerHTML="View";var l=r(c,"td");l.innerHTML="Pending",l.style.color="grey"}(e.date,e.name,e.type,e.status)});for(var n=document.getElementsByTagName("button"),a=function(e){n[e].onclick=function(){localStorage.setItem("requestId",e)}},c=0;c<n.length;c++)a(c)})})},function(e,t,n){"use strict";var o=document.getElementsByTagName("textarea")[0],r=document.getElementById("log-out"),a=document.getElementsByTagName("button"),c={};localStorage.length<1&&(alert("sorry this user needs to login!"),location.assign(location.origin)),localStorage.getItem("adminToken")&&location.assign("../admin/admin-requests");for(var s=function(e,t){return fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8",id:localStorage.getItem("id")},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(t)}).then(function(e){return e.json()})},i=0;i<a.length;i++)a[i].onclick=function(e){e.preventDefault();var t=o.value.trim();return t.length<10?alert("Should not be less the 10 character"):(c.type=(void 0).value,c.description=t,s("/users/requests",c).then(function(e){return console.log(e),e.error?(alert(e.error),localStorage.clear(),location.assign("./../")):alert(e.message)}).catch(function(e){return console.error(e)}))};r.onclick=function(){confirm("Logout?")&&localStorage.clear()}},function(e,t,n){"use strict";var o=document.getElementById("username"),r=document.getElementById("date"),a=document.getElementsByName("typeOfRequest"),c=document.getElementById("description"),s=document.getElementById("status"),i=document.getElementsByTagName("button")[0],l=document.getElementById("repairmaintain"),u=localStorage.getItem("requestId"),d=!1;localStorage.length<1&&(alert("sorry this user needs to login!"),location.assign(location.origin)),localStorage.getItem("adminToken")&&location.assign("../admin/admin-requests");var m=function(e,t,n){e.value=t+" "+n,e.innerHTML=t+" "+n};fetch("/users/requests/"+u,{method:"GET",headers:{id:localStorage.getItem("id"),"x-access-token":localStorage.getItem("userToken")},mode:"cors",cache:"default"}).then(function(e){e.json().then(function(e){var t=e.request,n=t.name,i=t.date,l=t.type,u=t.status,d=t.description;console.log(e),m(r,"Date created:",i),m(o,"Name:",n),m(c,"",d),m(s,"",u),l.toLowerCase()===a[1].value&&(a[1].checked=!0),"Accepted"===u&&(s.style.color="green")})}),i.onclick=function(e){var t={};e.preventDefault(),d&&(a[0].checked?t.type=a[0].value:t.type=a[1].value,t.description=c.value,function(e,t){return fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8",id:localStorage.getItem("id"),"x-access-token":localStorage.getItem("token")},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(t)}).then(function(e){return e.json()})}("/users/requests/"+u,t).then(function(e){console.log(e),alert(e.message),a[0].disabled=!0,a[1].disabled=!0,c.style.color="#F0300EFF",c.readOnly=!0,l.style.color="grey",i.innerHTML="Modify",d=!1}).catch(function(e){return console.error(e)})),a[0].disabled=!1,a[1].disabled=!1,c.style.color="black",c.readOnly=!1,l.style.color="black",i.innerHTML="Save",d=!0}}]);
//# sourceMappingURL=bundle.js.map